import{r,j as e,c as w,a as U,u as Y,P as N,b as T,d as X,B as L,e as y,Q as Z,f as ee,g as se,T as ae,h as te,i as ne}from"./QueryClientProvider-SY5Ag7ZX.js";import{c as R,u as re,a as ie,R as oe,I as le,L as j}from"./index-MNu_ApZx.js";import{W as de}from"./wind-CkFB1o0Z.js";const h=r.forwardRef(({className:s,type:t,...a},n)=>e.jsx("input",{type:t,className:w("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...a}));h.displayName="Input";var S="Tabs",[ce,ve]=U(S,[R]),F=R(),[ue,E]=ce(S),_=r.forwardRef((s,t)=>{const{__scopeTabs:a,value:n,onValueChange:l,defaultValue:u,orientation:o="horizontal",dir:g,activationMode:f="automatic",...x}=s,d=re(g),[c,p]=Y({prop:n,onChange:l,defaultProp:u??"",caller:S});return e.jsx(ue,{scope:a,baseId:ie(),value:c,onValueChange:p,orientation:o,dir:d,activationMode:f,children:e.jsx(N.div,{dir:d,"data-orientation":o,...x,ref:t})})});_.displayName=S;var A="TabsList",q=r.forwardRef((s,t)=>{const{__scopeTabs:a,loop:n=!0,...l}=s,u=E(A,a),o=F(a);return e.jsx(oe,{asChild:!0,...o,orientation:u.orientation,dir:u.dir,loop:n,children:e.jsx(N.div,{role:"tablist","aria-orientation":u.orientation,...l,ref:t})})});q.displayName=A;var k="TabsTrigger",M=r.forwardRef((s,t)=>{const{__scopeTabs:a,value:n,disabled:l=!1,...u}=s,o=E(k,a),g=F(a),f=$(o.baseId,n),x=G(o.baseId,n),d=n===o.value;return e.jsx(le,{asChild:!0,...g,focusable:!l,active:d,children:e.jsx(N.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":x,"data-state":d?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:f,...u,ref:t,onMouseDown:T(s.onMouseDown,c=>{!l&&c.button===0&&c.ctrlKey===!1?o.onValueChange(n):c.preventDefault()}),onKeyDown:T(s.onKeyDown,c=>{[" ","Enter"].includes(c.key)&&o.onValueChange(n)}),onFocus:T(s.onFocus,()=>{const c=o.activationMode!=="manual";!d&&!l&&c&&o.onValueChange(n)})})})});M.displayName=k;var D="TabsContent",V=r.forwardRef((s,t)=>{const{__scopeTabs:a,value:n,forceMount:l,children:u,...o}=s,g=E(D,a),f=$(g.baseId,n),x=G(g.baseId,n),d=n===g.value,c=r.useRef(d);return r.useEffect(()=>{const p=requestAnimationFrame(()=>c.current=!1);return()=>cancelAnimationFrame(p)},[]),e.jsx(X,{present:l||d,children:({present:p})=>e.jsx(N.div,{"data-state":d?"active":"inactive","data-orientation":g.orientation,role:"tabpanel","aria-labelledby":f,hidden:!p,id:x,tabIndex:0,...o,ref:t,style:{...s.style,animationDuration:c.current?"0s":void 0},children:p&&u})})});V.displayName=D;function $(s,t){return`${s}-trigger-${t}`}function G(s,t){return`${s}-content-${t}`}var me=_,B=q,O=M,K=V;const ge=me,Q=r.forwardRef(({className:s,...t},a)=>e.jsx(B,{ref:a,className:w("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));Q.displayName=B.displayName;const C=r.forwardRef(({className:s,...t},a)=>e.jsx(O,{ref:a,className:w("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...t}));C.displayName=O.displayName;const I=r.forwardRef(({className:s,...t},a)=>e.jsx(K,{ref:a,className:w("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));I.displayName=K.displayName;function fe(){const[s,t]=r.useState("login"),[a,n]=r.useState(!1),[l,u]=r.useState(""),[o,g]=r.useState(""),[f,x]=r.useState(""),[d,c]=r.useState(""),[p,J]=r.useState(""),[P,W]=r.useState("");r.useEffect(()=>{if(localStorage.getItem("user_id")){const m=localStorage.getItem("onboarding_complete");window.location.href=m?"/dashboard":"/onboarding"}},[]);const z=async i=>{i.preventDefault(),n(!0);try{const m=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:o})}),v=await m.json();if(!m.ok||!v.success)throw new Error(v.error||v.message||"Login failed");localStorage.setItem("username",l.split("@")[0]),y.success("Login successful"),window.location.href="/dashboard"}catch(m){y.error(m.message||"Login failed")}finally{n(!1)}},H=async i=>{i.preventDefault(),n(!0);try{const m=f.split("@")[0],v=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,email:f,password:d,firstname:p,lastname:P})}),b=await v.json();if(!v.ok||!b.success)throw new Error(b.error||b.message||"Signup failed");b.user_id&&localStorage.setItem("user_id",String(b.user_id)),b.username?localStorage.setItem("username",b.username):localStorage.setItem("username",m),y.success("Signup successful â€” welcome!"),window.location.href="/onboarding"}catch(m){y.error(m.message||"Signup failed")}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-aqi-good/20 via-background to-aqi-moderate/20 animate-fade-in",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"glass-card rounded-3xl p-8 animate-slide-up",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-accent to-aqi-moderate flex items-center justify-center mb-4",children:e.jsx(de,{className:"w-8 h-8 text-accent-foreground"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-accent to-aqi-moderate bg-clip-text text-transparent",children:"Airware"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Your personal air quality concierge"})]}),e.jsxs(ge,{defaultValue:"login",onValueChange:i=>t(i),className:"w-full",children:[e.jsxs(Q,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(C,{value:"login",children:"Login"}),e.jsx(C,{value:"signup",children:"Sign Up"})]}),e.jsx(I,{value:"login",children:e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(h,{id:"email",type:"email",value:l,onChange:i=>u(i.target.value),required:!0,className:"rounded-2xl"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"password",children:"Password"}),e.jsx(h,{id:"password",type:"password",value:o,onChange:i=>g(i.target.value),required:!0,className:"rounded-2xl"})]}),e.jsx(L,{type:"submit",disabled:a,className:"w-full rounded-2xl h-12 text-base font-semibold",children:a?"Signing in...":"Continue"})]})}),e.jsx(I,{value:"signup",children:e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"signup-firstname",children:"First Name"}),e.jsx(h,{id:"signup-firstname",type:"text",value:p,onChange:i=>J(i.target.value),required:!0,className:"rounded-2xl"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"signup-lastname",children:"Last Name"}),e.jsx(h,{id:"signup-lastname",type:"text",value:P,onChange:i=>W(i.target.value),required:!0,className:"rounded-2xl"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"signup-email",children:"Email"}),e.jsx(h,{id:"signup-email",type:"email",value:f,onChange:i=>x(i.target.value),required:!0,className:"rounded-2xl"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"signup-password",children:"Password"}),e.jsx(h,{id:"signup-password",type:"password",value:d,onChange:i=>c(i.target.value),required:!0,className:"rounded-2xl"})]}),e.jsx(L,{type:"submit",disabled:a,className:"w-full rounded-2xl h-12 text-base font-semibold",children:a?"Creating account...":"Continue"})]})})]})]})})})}const pe=new Z;ee(document.getElementById("root")).render(e.jsx(se,{client:pe,children:e.jsxs(ae,{children:[e.jsx(te,{}),e.jsx(ne,{}),e.jsx(fe,{})]})}));
